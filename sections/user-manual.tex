\documentclass[../main.tex]{subfiles}

\begin{document}
\section{User’s Manual}

\subsection{Overview}
The Harm Drone system is a modular embedded data logger designed for UAV platforms. It allows users to interface up to four USB sensors, log data to onboard memory and an SD card, and retrieve data post-flight on any major OS. This manual outlines how to install, configure, operate, and troubleshoot the system.

\subsection{Package Contents}
\begin{itemize}
    \item Harm Drone PCB (fully assembled)
    \item 3D-printed PLA enclosure
    \item Pre-flashed microcontroller
    \item USB sensors (x3 Yoctopuce, x1 USB thermometer)
    \item SD Card (>4GB, FAT32 formatted)
    \item Power cable (XT60 or barrel)
\end{itemize}

\subsection{Installation}

\subsubsection{Hardware Setup}
\begin{enumerate}
    \item Insert SD card into SD card slot.
    \item Connect up to four USB sensors to the USB hub.
    \item Attach XT60 power input to 14.8V LiPo battery.
    \item Ensure the enclosure is secured and ventilation is unobstructed.
\end{enumerate}

\subsubsection{Software Setup (Optional)}
\begin{enumerate}
    \item If using VirtualHub (for Yoctopuce sensors), install it on the onboard computer:
    \begin{verbatim}
    sudo ./VirtualHub
    \end{verbatim}
    \item Connect the drone to a host PC via USB-to-serial.
\end{enumerate}

\subsection{Operation}
\begin{enumerate}
    \item Power on the board. Boot takes <5 seconds.
    \item The LED indicator will pulse to indicate data logging has begun.
    \item The system will automatically begin recording sensor data to onboard memory and SD card.
    \item To stop logging, either cut power or send a stop command over serial.
\end{enumerate}

\subsection{File Structure}
\begin{itemize}
\end{itemize}

\subsection{Maintenance}
\begin{itemize}
    \item Keep USB ports clean and avoid moisture exposure.
    \item Do not operate without an enclosure during flight.
    \item Check solder joints and connectors before flight.
    \item Update firmware periodically.
\end{itemize}
\subsection{Hypothetical UAV Integration}

While the Harm Drone PCB was not tested on a physical UAV, it was designed with drone integration in mind. The following outlines how the system would be installed and operated on a drone platform in a real-world deployment.

\subsubsection{Physical Mounting}
The PCB would be mounted inside the UAV fuselage or payload bay using vibration-dampened standoffs. The 3D-printed PLA enclosure features access ports for the USB hub, SD card slot, power input, and debug headers. Care would be taken to ensure:

\begin{itemize}
    \item All sensors are securely plugged into the USB hub.
    \item The enclosure is protected from direct airflow and moisture.
    \item The system is isolated from electromagnetic interference sources such as ESCs and motors.
\end{itemize}

\subsubsection*{Power Supply}
The Harm Drone requires 14.8V input, which is compatible with most UAV battery systems (e.g., 4S LiPo). Power would be drawn via an XT60 connector split off the drone’s main battery line using a voltage-protected parallel tap. The board's internal buck and LDO regulators would then generate 5V and 3.3V rails for the USB hub and MCU.

\subsubsection{Communication}
The system can be connected to the drone’s flight computer via USB-to-serial (UART) for receiving mission start/stop commands and optional GPS waypoint data. If using a system like Pixhawk or ArduPilot:

\begin{itemize}
    \item A UART port from the FC would connect to the board’s USART lines (TX/RX).
    \item The microcontroller would parse incoming MAVLink or custom serial messages to trigger logging.
    \item Outgoing sensor status or logging state could be sent back to the FC for telemetry overlay.
\end{itemize}

\subsubsection{Operation in Flight}
Once powered, the system would initialize in under 5 seconds and begin polling the connected USB sensors. Data would be logged to both internal flash and the SD card. The lightweight design ensures minimal impact on flight time or payload capacity.

\subsubsection{Data Retrieval}
Post-flight, the SD card would be removed and accessed via any standard OS. Files are saved in timestamped folders in serial format for immediate analysis.

\subsubsection{Safety Considerations}
All lighting is PWM-controlled and conforms to IEEE 1789-2015 standards, allowing for safe visual inspection or night operation. The system includes current limiting and watchdog timers to ensure safe shutdown in case of anomalies.

\subsection{Troubleshooting}
\begin{tabular}{|l|l|l|}
\hline
\textbf{Issue} & \textbf{Possible Cause} & \textbf{Solution} \\
\hline
No LED at boot & No power or damaged regulator & Check XT60 power, LDO output \\
\hline
No data on SD card & Card not inserted/formatted & Ensure FAT32 format, reinsert \\
\hline
Sensor not detected & Loose USB connection & Replug sensor, restart system \\
\hline
VirtualHub doesn't detect & Hub not initialized & Confirm hub power and clock \\
\hline
\end{tabular}

\subsection{Contact and Support}
For support, contact Group 127 via \texttt{harmdrone@unomaha.edu}. For Yoctopuce sensor help, visit \texttt{www.yoctopuce.com}.

\end{document}
